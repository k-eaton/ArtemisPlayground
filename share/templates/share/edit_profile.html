{% extends "share/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
{% if error %}
  		<h3 class="title is-3" style="color: red">{{ error }}</h3>
{% endif %}

<div class="columns">
  <div class = "column">
    {% if error %}
    <h3 class="title is-3" style="color: red">{{ error }}</h3>
    {% endif %}
    <h4 class = "title is-5"> Profile Settings </h4>

    <form action="{% url 'share:update_profile' user.id %}" method = "POST" enctype="multipart/form-data">
      {% csrf_token %}

      {% if my_profile.icon.photo %}
        <figure class="image is-64x64">
          <img src="{{ my_profile.icon.photo.url }}">
        </figure>
      {% endif %}

      <div class="field">
        <div class="control">
          <label class="label">Change Icon</label>
            <input type="file" id="icon" name="icon">
        </div>
      </div>

        <div class = "field">
          <div class="control">
            <label class="label">Page Name</label>
            <input class="input is-warning" value="{{user.profile.page_name}}" placeholder="Page Name" type="text" id="page_name" name="page_name">
          </div>
        </div>

        <div class = "field">
          <div class="control">
            <label class="label">First Name</label>
            <input class="input is-warning" value="{{user.first_name}}" placeholder="First Name" type="text" id="first_name" name="first_name">
          </div>
        </div>

        <div class = "field">
          <div class="control">
            <label class="label">Last Name</label>
            <input class="input is-warning" value="{{user.last_name}}" placeholder="Last Name" type="text" id="last_name" name="last_name">
          </div>
        </div>

        <div class = "field">
          <div class="control">
            <label class="label">Username</label>
            <input class="input is-warning" value="{{user.username}}" placeholder="Username" type="text" id="username" name="username">
          </div>
        </div>

        <div class = "field">
          <div class="control">
            <label class="label">Email</label>
            <input class="input is-warning" value="{{user.email}}" placeholder="Email" type="text" id="email" name="email">
          </div>
        </div>



    <br><br>
    <!-- <form action="{% url 'share:update_profile' user.id %}"method = "POST" enctype="multipart/form-data">
      {% csrf_token %} -->
      <!-- <fieldset class="form-group">
        {{ u_form|crispy }}
        {{ p_form|crispy }}
      </fieldset> -->


      <div class="form-group">
        <button class="button is-success is-outlined is-fullwidth" type="submit" value="Update">Update</button>&nbsp;
      </div>
    </form>

    <h3 class="title is-5">Delete Profile</h3>
    <form action="{% url 'share:delete_profile' user.id %}" method="post">
      {% csrf_token %}
      <button class="button is-danger is-outlined is-fullwidth" type="submit" name="delete" value="Delete">Delete</button>&nbsp;
    </form>

  </div>
</div>

{% endblock content %}
